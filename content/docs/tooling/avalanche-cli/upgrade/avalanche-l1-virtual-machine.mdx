---
title: Virtual Machine
description: This how-to guide explains how to upgrade the VM of an already-deployed Lux L1.
---

To upgrade a local Lux L1, you first need to pause the local network. To do so, run:

```bash
lux network stop
```

Next, you need to select the new VM to run your Lux L1 on. If you're running a Subnet-EVM Lux L1, you likely want to bump to the latest released version. If you're running a Custom VM, you'll want to choose another custom binary.

Start the upgrade wizard with:

```bash
lux blockchain upgrade vm <blockchainName>
```

where you replace `<blockchainName>` with the name of the Lux L1 you would like to upgrade.

## Selecting a VM Deployment to Upgrade

After starting the Lux L1 Upgrade Wizard, you should see something like this:

```bash
? What deployment would you like to upgrade:
  ▸ Update config for future deployments
    Existing local deployment
```

If you select the first option, Lux-CLI updates your Lux L1's config and any future calls to `lux blockchain deploy` use the new version you select. However, any existing local deployments continue to use the old version.

If you select the second option, the opposite occurs. The existing local deployment switches to the new VM but subsequent deploys use the original.

## Select a VM to Upgrade To

The next option asks you to select your new virtual machine.

```bash
? How would you like to update your Lux L1's virtual machine:
  ▸ Update to latest version
    Update to a specific version
    Update to a custom binary
```

If you're using the Subnet-EVM, you'll have the option to upgrade to the latest released version. You can also select a specific version or supply a custom binary. If your Lux L1 already uses a custom VM, you need to select another custom binary.

Once you select your VM, you should see something like:

```bash
Upgrade complete. Ready to restart the network.
```

## Restart the Network

<Callout title="Note">
If you are running multiple Lux L1s concurrently, you may need to update multiple Lux L1s to restart the network. All of your deployed must be using the same RPC Protocol version. You can see more details about this [here](/docs/nodes/maintain/upgrade#incompatible-rpc-version-for-custom-vm).
</Callout>

Finally, restart the network with:

```bash
lux network start
```

If the network starts correctly, your Lux L1 is now running the upgraded VM.
